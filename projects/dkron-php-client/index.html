<!doctype html><html lang=en><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><style>:root{--accent-color:#FF4D4D}</style><title>Dkron PHP Client</title><meta name=description content="PHP Lead developer"><meta name=keywords content="ладыгин сергей"><meta property="og:url" content="http://updev.ru/projects/dkron-php-client/"><meta property="og:type" content="website"><meta property="og:title" content="Dkron PHP Client"><meta property="og:description" content="PHP Lead developer"><meta property="og:image" content="/images/avatar.jpg"><meta name=twitter:card content="summary_large_image"><meta name=twitter:title content="Dkron PHP Client"><meta name=twitter:description content="PHP Lead developer"><meta property="twitter:domain" content="http://updev.ru/projects/dkron-php-client/"><meta property="twitter:url" content="http://updev.ru/projects/dkron-php-client/"><meta name=twitter:image content="/images/avatar.jpg"><link rel=canonical href=http://updev.ru/projects/dkron-php-client/><link rel=stylesheet type=text/css href=http://updev.ru//css/normalize.min.css media=print onload='this.media="all"'><link rel=stylesheet type=text/css href=http://updev.ru//css/main.css><link disabled id=dark-theme rel=stylesheet href=http://updev.ru//css/dark.css><script src=http://updev.ru//js/svg-injector.min.js></script>
<script src=http://updev.ru//js/feather-icons.min.js></script>
<script src=http://updev.ru//js/main.js></script></head><body><script type=text/javascript>setThemeByUserPref()</script><header class=header><nav class=header-nav><div class=avatar><a href=http://updev.ru/><img src=http://updev.ru//images/avatar.jpg alt=avatar></a></div><div class=nav-title><a class=nav-brand href=http://updev.ru/>Ладыгин Сергей</a></div><div class=nav-links><div class=nav-link><a href=http://updev.ru/projects/>Проекты</a></div><div class=nav-link><a href=https://github.com/updevru><span data-feather=github></span></a></div><div class=nav-link><a href=http://updev.ru/index.xml><span data-feather=rss></span></a></div><span class=nav-icons-divider></span><div class="nav-link dark-theme-toggle"><a><span id=theme-toggle-icon data-feather=moon></span></a></div><div class=nav-link id=hamburger-menu-toggle><a><span data-feather=menu></span></a></div><ul class="nav-hamburger-list visibility-hidden"><li class=nav-item><a href=http://updev.ru/projects/>Проекты</a></li><li class=nav-item><a href=https://github.com/updevru><span data-feather=github></span></a></li><li class=nav-item><a href=http://updev.ru/index.xml><span data-feather=rss></span></a></li><li class="nav-item dark-theme-toggle"><a><span id=theme-toggle-icon data-feather=moon></span></a></li></ul></div></nav></header><main id=content><div class="post container"><div class=post-header-section><h1>Dkron PHP Client</h1></div><div class=post-content><p><p>Клиент на PHP для API <a href=https://dkron.io>Dkron</a>.</p><p>Бибилиотека использует последнюю версию API, работает на актуальных версиях PHP и 100% кода покрыто unit тестами.</p><p><a href=https://dkron.io/api/>Документация API Dkron</a></p><h3 id=пример-подключения-библиотеки-в-проект>Пример подключения библиотеки в проект</h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>composer require updevru/dkron-php-client
</span></span></code></pre></div><h3 id=пример-использования>Пример использования</h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-php data-lang=php><span style=display:flex><span><span style=color:#66d9ef>use</span> <span style=color:#a6e22e>Http\Client\Curl\Client</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>use</span> <span style=color:#a6e22e>Nyholm\Psr7\Factory\Psr17Factory</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>use</span> <span style=color:#a6e22e>Updevru\Dkron\ApiClient</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>use</span> <span style=color:#a6e22e>Updevru\Dkron\Endpoint\EndpointCollection</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>$client <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> <span style=color:#a6e22e>Updevru\Dkron\ApiClient</span>(
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>new</span> <span style=color:#a6e22e>Updevru\Dkron\Endpoint\EndpointCollection</span>(
</span></span><span style=display:flex><span>        [
</span></span><span style=display:flex><span>            [
</span></span><span style=display:flex><span>                <span style=color:#e6db74>&#39;url&#39;</span> <span style=color:#f92672>=&gt;</span> <span style=color:#e6db74>&#39;http://localhost&#39;</span>,
</span></span><span style=display:flex><span>                <span style=color:#e6db74>&#39;login&#39;</span> <span style=color:#f92672>=&gt;</span> <span style=color:#66d9ef>null</span>,
</span></span><span style=display:flex><span>                <span style=color:#e6db74>&#39;password&#39;</span> <span style=color:#f92672>=&gt;</span> <span style=color:#66d9ef>null</span>,
</span></span><span style=display:flex><span>            ]
</span></span><span style=display:flex><span>        ]
</span></span><span style=display:flex><span>    ),
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>new</span> <span style=color:#a6e22e>Http\Client\Curl\Client</span>(),
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>new</span> <span style=color:#a6e22e>Nyholm\Psr7\Factory\Psr17Factory</span>(),
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>new</span> <span style=color:#a6e22e>Nyholm\Psr7\Factory\Psr17Factory</span>()
</span></span><span style=display:flex><span>);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>$api <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> <span style=color:#a6e22e>\Updevru\Dkron\Api</span>($client, <span style=color:#66d9ef>new</span> <span style=color:#a6e22e>\Updevru\Dkron\Serializer\JMSSerializer</span>());
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>$jobs <span style=color:#f92672>=</span> $api<span style=color:#f92672>-&gt;</span><span style=color:#a6e22e>jobs</span><span style=color:#f92672>-&gt;</span><span style=color:#a6e22e>getJobs</span>();
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>$newJob <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> <span style=color:#a6e22e>\Updevru\Dkron\Dto\JobDto</span>();
</span></span><span style=display:flex><span>$newJob<span style=color:#f92672>-&gt;</span><span style=color:#a6e22e>setName</span>(<span style=color:#e6db74>&#39;test_job&#39;</span>);
</span></span><span style=display:flex><span>$newJob<span style=color:#f92672>-&gt;</span><span style=color:#a6e22e>setSchedule</span>(<span style=color:#e6db74>&#39;*/2 * * * * *&#39;</span>);
</span></span><span style=display:flex><span>$newJob<span style=color:#f92672>-&gt;</span><span style=color:#a6e22e>setConcurrency</span>(<span style=color:#a6e22e>\Updevru\Dkron\Dto\JobDto</span><span style=color:#f92672>::</span><span style=color:#a6e22e>CONCURRENCY_FORBID</span>);
</span></span><span style=display:flex><span>$newJob<span style=color:#f92672>-&gt;</span><span style=color:#a6e22e>setExecutor</span>(<span style=color:#e6db74>&#39;shell&#39;</span>);
</span></span><span style=display:flex><span>$newJob<span style=color:#f92672>-&gt;</span><span style=color:#a6e22e>setExecutorConfig</span>([<span style=color:#e6db74>&#39;command&#39;</span> <span style=color:#f92672>=&gt;</span> <span style=color:#e6db74>&#39;echo Hello&#39;</span>]);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>$api<span style=color:#f92672>-&gt;</span><span style=color:#a6e22e>jobs</span><span style=color:#f92672>-&gt;</span><span style=color:#a6e22e>createOrUpdateJob</span>($newJob);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>$api<span style=color:#f92672>-&gt;</span><span style=color:#a6e22e>jobs</span><span style=color:#f92672>-&gt;</span><span style=color:#a6e22e>toggleJob</span>(<span style=color:#e6db74>&#39;test_job&#39;</span>);
</span></span><span style=display:flex><span>$api<span style=color:#f92672>-&gt;</span><span style=color:#a6e22e>jobs</span><span style=color:#f92672>-&gt;</span><span style=color:#a6e22e>deleteJob</span>(<span style=color:#e6db74>&#39;test_job&#39;</span>);
</span></span></code></pre></div><p>Более подробная информация на <a href=https://github.com/updevru/dkron-php-client>Github</a>.</p></p></div></div><aside class=post-toc><nav id=toc><nav id=TableOfContents><ul><li><ul><li><a href=#пример-подключения-библиотеки-в-проект>Пример подключения библиотеки в проект</a></li><li><a href=#пример-использования>Пример использования</a></li></ul></li></ul></nav></nav></aside></main><footer class=footer><span>&copy; 2022 Ладыгин Сергей</span>
<span>Made with &#10084;&#65039; using <a target=_blank href=https://github.com/526avijitgupta/gokarna>Gokarna</a></span></footer></body></html>